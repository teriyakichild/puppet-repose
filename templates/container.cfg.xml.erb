<?xml version="1.0" encoding="UTF-8"?>

<!-- To configure Repose see: http://wiki.openrepose.org/display/REPOSE/Configuration -->
<repose-container xmlns="http://<%= scope.lookupvar('::repose::cfg_namespace_host') %>/repose/container/v2.0">
    <deployment-config
<%- if @http_port -%>
        http-port="<%= @http_port %>"
<%- end -%>
<%- if @https_port -%>
        https-port="<%= @https_port %>"
<%- end -%>
<%- if @via -%>
        via="<%= @via %>"
<%- end -%>
<%- if @content_body_read_limit -%>
        content-body-read-limit="<%= @content_body_read_limit %>"
<%- end -%>
<%- if @connection_timeout -%>
        connection-timeout="<%= @connection_timeout %>"
<%- end -%>
<%- if @read_timeout -%>
        read-timeout="<%= @read_timeout %>"
<%- end -%>
<%- if @proxy_thread_pool -%>
        proxy-thread-pool="<%= @proxy_thread_pool %>"
<%- end -%>
<%- if @client_request_logging -%>
        client-request-logging="<%= @client_request_logging -%>"
<%- end -%>
<%- if @jmx_reset_time -%>
        jmx-reset-time="<%= @jmx_reset_time -%>"
<%- end -%>
        >

        <deployment-directory auto-clean="<%= @deployment_directory_auto_clean %>"><%= @deployment_directory %></deployment-directory>

        <artifact-directory check-interval="<%= @artifact_directory_check_interval %>"><%= @artifact_directory %></artifact-directory>

<%- if @log_use_log4j2 == true -%>
        <logging-configuration href="file://<%= @logging_configuration_file %>"/>
<%- else -%>
        <logging-configuration href="<%= @logging_configuration %>"/>
<%- end -%>

<%- if @ssl_enabled == true -%>
        <ssl-configuration>
            <keystore-filename><%= @ssl_keystore_filename %></keystore-filename>
            <keystore-password><%= @ssl_keystore_password %></keystore-password>
            <key-password><%= @ssl_key_password %></key-password>
	    <%- if @ssl_include_cipher -%>
	    <included-ciphers>
	        <%- @ssl_include_cipher.each do |cipher| -%>
		<cipher><%= cipher %></cipher>
                <%- end -%>
	    </included-ciphers>
            <%- end -%>
	    <%- if @ssl_exclude_cipher -%>
	    <excluded-ciphers>
	        <%- @ssl_exclude_cipher.each do |cipher| -%>
		<cipher><%= cipher %></cipher>
                <%- end -%>
	    </excluded-ciphers>
            <%- end -%>
        </ssl-configuration>
<%- end -%>
    </deployment-config>
</repose-container>

